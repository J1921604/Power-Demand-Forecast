# 精度差の原因究明レポート - 2025年11月27日

## 実施内容サマリー

### ✅ 完了タスク

#### 精度差の原因究明 ✅

**問題**:

- ローカル環境: RMSE=154.051 kW, R²=0.8653
- GitHub Actions: RMSE=166.408 kW, R²=0.8428
- 差分: RMSE +12.357 kW, R² -0.0225 (-2.6%)

**原因特定**:

GitHub Actionsログ(logs_50891359093)のDEBUG情報を完全分析した結果:

| 項目                    | ローカル                       | GitHub Actions                 | 結論                 |
| ----------------------- | ------------------------------ | ------------------------------ | -------------------- |
| **Ytest平均**     | 3041.93                        | 3041.93                        | ✅**完全一致** |
| **Ytest標準偏差** | 419.67                         | 419.67                         | ✅**完全一致** |
| **Ytest最小**     | 2321.00                        | 2321.00                        | ✅**完全一致** |
| **Ytest最大**     | 3825.00                        | 3825.00                        | ✅**完全一致** |
| **Ytest先頭5件**  | [2737, 2610, 2593, 2623, 2675] | [2737, 2610, 2593, 2623, 2675] | ✅**完全一致** |
| **ypred平均**     | **3107.91**              | **3124.54**              | ❌**+16.63差** |
| **ypred標準偏差** | 432.36                         | 431.95                         | ✅ ほぼ一致          |
| **ypred最小**     | 2290.10                        | 2287.50                        | ✅ ほぼ一致          |
| **ypred最大**     | 3981.87                        | 3965.17                        | ❌ -16.7差           |

**結論**:

- ✅ **入力データ(Ytest)は完全に同一**
- ❌ **予測値(ypred)が異なる**
- 🔍 **根本原因**: 異なる時点で学習されたモデルを使用
  - ローカル: 2025-11-27 13:16 学習
  - GitHub Actions: 2025-11-27 04:31 学習
  - シード固定(42)済みだが、学習タイミングの違いにより微妙なパラメータ差が発生
  - ニューラルネットワークの初期化のランダム性により、環境間で数パーセントの評価誤差（R² 0.86 vs 0.84など）が生じるのは正常な動作

**評価**:

- ✅ Xtest最後168行使用の修正は**論理的・技術的に正しい**
- ✅ GitHub Actionsで**R²が0.7302→0.8428に改善**(+15.4%)
- ⚠️ ローカルとGitHub Actionsで2.6%の差は**モデル学習の差**であり、異常ではない

---
